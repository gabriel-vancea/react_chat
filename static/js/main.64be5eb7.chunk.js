(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{51:function(e,a,t){e.exports=t(72)},56:function(e,a,t){},57:function(e,a,t){},72:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(9),c=t.n(r),i=(t(56),t(57),t(107)),l=t(29),m=t(11),s=t(24),u=t(26),d=t.n(u);t(58),t(74),t(60),t(62),t(73),t(65);d.a.initializeApp({apiKey:"AIzaSyAUZkL3r1VABg3N3T88dj0VnwnEi6Fyjs4",authDomain:"chat-345ad.firebaseapp.com",databaseURL:"https://chat-345ad.firebaseio.com",projectId:"chat-345ad",storageBucket:"chat-345ad.appspot.com",messagingSenderId:"119199190590",appId:"1:119199190590:web:3614b84a67ebd60abf0b6f"});var f=d.a.firestore();var p=function(e,a){return f.collection("chat").add({text:e,roomId:a,datetime:new Date,user:localStorage.getItem("user")})};var g=t(33),h=t(40),v=t.n(h);function E(e){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:{height:"600px"}},o.a.createElement(g.a,{forceScroll:!0},o.a.createElement("div",{className:"chat-history"},o.a.createElement("ul",null,function(e){var a=Object(n.useState)([]),t=Object(s.a)(a,2),r=t[0],c=t[1];return o.a.useEffect((function(){e&&f.collection("chat").where("roomId","==",e).orderBy("datetime","asc").onSnapshot((function(e){var a=e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())}));c(a)}))}),[e]),r}(e.roomID).map((function(e){return o.a.createElement("li",{key:e.id,className:"clearfix"},e.user===localStorage.getItem("user")?o.a.createElement("div",{className:"message-data"},o.a.createElement("span",{className:"message-data-name"},o.a.createElement("i",{className:"fa fa-circle online"}),"You"),o.a.createElement("span",{className:"message-data-time"},v.a.unix(e.datetime).format("D MMM, LT"))):o.a.createElement("div",{className:"message-data"},o.a.createElement("span",{className:"message-data-name float-right"},o.a.createElement("i",{className:"fa fa-circle online"}),"Anonymous"),o.a.createElement("span",{className:"message-data-time"},v.a.unix(e.datetime).format("D MMM, LT"))),e.user===localStorage.getItem("user")?o.a.createElement("div",{className:"message my-message"},e.text):o.a.createElement("div",{className:"message other-message float-right"},e.text))})))))))}var b=function(e){var a=o.a.useState({inputText:"",roomId:"",defaultRoom:""}),t=Object(s.a)(a,2),n=t[0],r=t[1];return o.a.createElement("div",null,o.a.createElement(E,{roomID:e.roomIdClicked?e.roomIdClicked:e.defaultRoom}),o.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.roomIdClicked?p(a.target[0].value,e.roomIdClicked).then((function(){return r({inputText:""})})):p(a.target[0].value,e.defaultRoom).then((function(){return r({inputText:""})}))}},o.a.createElement("div",{className:"chat-message clearfix"},o.a.createElement("textarea",{onChange:function(e){r({inputText:e.target.value})},value:n.inputText,name:"message-to-send",id:"message-to-send",placeholder:"Type your message",rows:"3",onKeyDown:function(a){return function(a){"Enter"!==a.code&&"NumpadEnter"!==a.code||(e.roomIdClicked?p(a.target.value,e.roomIdClicked).then((function(){return r({inputText:""})})):p(a.target.value,e.defaultRoom).then((function(){return r({inputText:""})})))}(a)}}),o.a.createElement("i",{className:"fa fa-file-o"})," \xa0\xa0\xa0",o.a.createElement("i",{className:"fa fa-file-image-o"}),o.a.createElement("button",null,"Send"))))},x=t(109),y=t(108),I=function(){var e=function(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],r=a[1];return o.a.useEffect((function(){f.collection("rooms").orderBy("datetime","asc").onSnapshot((function(e){var a=e.docs.map((function(e){return Object(m.a)({id:e.id},e.data())}));r(a)}))}),[]),t}(),a=o.a.useState({inputText:"",inputRoomText:"",inputSearch:"",submittedText:"",submittedRoomText:"",rooms:[],chatComponent:!1,roomIdClicked:"",defaultRoom:"",activeRoom:null}),t=Object(s.a)(a,2),r=t[0],c=t[1];o.a.useEffect((function(){d.a.auth().signInAnonymously().catch((function(e){if(e)return e.message})),d.a.auth().onAuthStateChanged((function(e){e?localStorage.setItem("user",e.uid):localStorage.setItem("user","")})),e[0]&&c(Object(m.a)(Object(m.a)({},r),{},{defaultRoom:e[0].id}))}),[e]);function i(e){var a=e.currentTarget.dataset.id;c(Object(m.a)(Object(m.a)({},r),{},{chatComponent:!0,roomIdClicked:a,activeRoom:a,defaultRoom:""}))}function u(e){return o.a.createElement("li",{className:r.activeRoom===e.id||r.defaultRoom===e.id?"clearfix active":"clearfix",onClick:i,"data-id":e.id,key:e.id},o.a.createElement("div",null,o.a.createElement("div",{className:"name"},e.name)))}return o.a.createElement("div",{className:"container clearfix"},o.a.createElement("div",{className:"people-list",id:"people-list"},o.a.createElement("div",{className:"search"},o.a.createElement("input",{value:r.inputSearch,onChange:function(e){c(Object(m.a)(Object(m.a)({},r),{},Object(l.a)({},e.target.name,e.target.value)))},name:"inputSearch",type:"text",placeholder:"Search"})),o.a.createElement("div",{className:"rooms"},o.a.createElement(g.a,null,o.a.createElement("ul",{className:"list"},r.inputSearch?e.filter((function(e){return e.name.includes(r.inputSearch)})).map((function(e){return u(e)})):e.map((function(e){return u(e)}))))),o.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{display:"flex",marginLeft:"10px",marginTop:"10px",marginRight:"10px"}},o.a.createElement(y.a,{value:r.inputRoomText,name:"inputRoomText",onChange:function(e){c(Object(m.a)(Object(m.a)({},r),{},Object(l.a)({},e.target.name,e.target.value)))},id:"outlined-basic",placeholder:"Create Room",size:"small",variant:"filled",style:{borderRadius:"0 0 0 0"}}),o.a.createElement(x.a,{onClick:function(e){var a;e.preventDefault(),(a=r.inputRoomText,f.collection("rooms").add({name:a,datetime:new Date,user:localStorage.getItem("user")})).then((function(e){return c(Object(m.a)(Object(m.a)({},r),{},{inputRoomText:""}))}))},variant:"contained",type:"submit",color:"primary",size:"small"},"Create"))),o.a.createElement("div",{className:"chat"},o.a.createElement(b,r)))};var N=function(){return o.a.createElement(i.a,{component:"div",variant:"body1"},o.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(71);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.64be5eb7.chunk.js.map